{% extends 'base.html.twig' %}

{% block title %}Create New Expense{% endblock %}

{% block body %}
    <div class="min-h-screen flex items-center justify-center bg-gray-100 py-8">
        <div class="w-full max-w-4xl bg-white shadow-md rounded-lg p-6">
            <h1 class="text-2xl font-bold text-gray-800 text-center mb-6">Create New Expense</h1>

            {{ form_start(form, { 'attr': { 'class': 'space-y-6' } }) }}

            <!-- Champ Amount -->
            <div>
                {{ form_label(form.amount, null, { 'label_attr': { 'class': 'block text-sm font-medium text-gray-700' } }) }}
                {{ form_widget(form.amount, { 'attr': { 'class': 'mt-1 block w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm' } }) }}
                {{ form_errors(form.amount) }}
            </div>

            <!-- Champ Name -->
            <div>
                {{ form_label(form.name, null, { 'label_attr': { 'class': 'block text-sm font-medium text-gray-700' } }) }}
                {{ form_widget(form.name, { 'attr': { 'class': 'mt-1 block w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm' } }) }}
                {{ form_errors(form.name) }}
            </div>

            <!-- Champ Type -->
            <div>
                {{ form_label(form.type, null, { 'label_attr': { 'class': 'block text-sm font-medium text-gray-700' } }) }}
                {{ form_widget(form.type, { 'attr': { 'class': 'mt-1 block w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm' } }) }}
                {{ form_errors(form.type) }}
            </div>

            <!-- Champ Date -->
            <div>
                {{ form_label(form.date, null, { 'label_attr': { 'class': 'block text-sm font-medium text-gray-700' } }) }}
                {{ form_widget(form.date, { 'attr': { 'class': 'mt-1 block w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm' } }) }}
                {{ form_errors(form.date) }}
            </div>

            <!-- Champ Category Entity -->
            <div>
                {{ form_label(form.categoryEntity, null, { 'label_attr': { 'class': 'block text-sm font-medium text-gray-700' } }) }}
                <div {{ react_component('CategoryInput', {
                    predefinedCategories: categories,
                    inputName: form.categoryEntity.vars.full_name,
                    subcatInputName: form.subcategoryEntity.vars.full_name
                }) }}></div>

                <!-- Champ masquÃ© pour Symfony -->
                {{ form_widget(form.categoryEntity, { 'attr': { 'style': 'display: none;' } }) }}
                {{ form_widget(form.subcategoryEntity, { 'attr': { 'style': 'display: none;' } }) }}

            </div>

            <!-- Champ User Profile Entity -->
            <div>
                {{ form_label(form.userProfileEntity, null, { 'label_attr': { 'class': 'block text-sm font-medium text-gray-700' } }) }}
                {{ form_widget(form.userProfileEntity, { 'attr': { 'class': 'mt-1 block w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm' } }) }}
                {{ form_errors(form.userProfileEntity) }}
            </div>

            <!-- Boutons d'action -->
            <div class="flex justify-between mt-6">
                <a href="{{ path('app_home_index') }}"
                   class="bg-gray-600 text-white py-2 px-4 rounded-lg hover:bg-gray-700 focus:ring-2 focus:ring-gray-500">
                    Back to List
                </a>
                <button type="submit"
                        class="bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 focus:ring-2 focus:ring-blue-500">
                    Submit
                </button>
            </div>

            {{ form_end(form) }}
        </div>
    </div>
{% endblock %}
